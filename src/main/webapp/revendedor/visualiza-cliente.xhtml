<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Gerenciador de vendas</title>
    </h:head>
    <h:body>
	<h:form>
	    <p:dataTable style="border: black" id="clientes" selectionMode="single" selection="#{clienteController.cliente}" rowKey="#{cliente.id}" var="cliente" value="#{clienteController.buscarTodosAction()}" emptyMessage="Nenhum cliente cadastrado">
		<p:column headerText="Cpf" filterBy="#{cliente.cpf}">
		    <h:outputText value="#{cliente.cpf}"/>
		</p:column>
		<p:column headerText="Nome" filterBy="#{cliente.nome}">
		    <h:outputText value="#{cliente.nome}"/>
		</p:column>
	    </p:dataTable>
	    <p:contextMenu for="clientes">
                <p:menuitem value="Visualizar" icon="ui-icon-search" oncomplete="PF('widDialVisualizarCliente').show()" update="dialVisu"/>
                <p:menuitem value="Deletar" icon="ui-icon-trash" actionListener="#{clienteController.deletarAction()}" update="clientes"/>
                <p:menuitem value="Alterar" icon="ui-icon-pencil" action="altera-cliente.xhtml"/>
            </p:contextMenu>
	</h:form>
	<p:dialog id="dialVisu" header="Informações do cliente" widgetVar="widDialVisualizarCliente" draggable="false" modal="true" resizable="false" showEffect="fade" hideEffect="fade">
	    <p:panelGrid columns="2">
		<h:outputText value="Cpf"/>
		<h:outputText value="#{clienteController.cliente.cpf}"/>
		<h:outputText value="Nome"/>
		<h:outputText value="#{clienteController.cliente.nome}"/>
		<h:outputText value="Endereço"/>
		<h:outputText value="#{clienteController.cliente.endereco}"/>
		<h:outputText value="Email"/>
		<h:outputText value="#{clienteController.cliente.email}"/>
		<h:outputText value="Telefone"/>
		<h:outputText value="#{clienteController.cliente.telefone}"/>
	    </p:panelGrid>
	</p:dialog>
    </h:body>
</html>

